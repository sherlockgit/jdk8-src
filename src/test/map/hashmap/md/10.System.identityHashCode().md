在 Java 中，`System.identityHashCode(Object x)` 是一个重要的方法，用于获取对象的 **原始哈希码（identity hash code）**。以下是关键特性的全面解析：

---

### 核心特性
1. **唯一标识对象身份**
   - 返回基于对象内存地址计算的哈希码（具体实现依赖 JVM，但通常与地址相关）。
   - **与 `hashCode()` 的区别**：
      - 若类未重写 `hashCode()`，则 `hashCode()` 默认返回 `identityHashCode`。
      - 若类重写了 `hashCode()`（如 `String`、`List`），`identityHashCode` **仍会返回原始哈希**，不受重写影响。

2. **一致性保证**
   - 同一对象在 JVM 生命周期内多次调用，返回值**始终相同**（即使对象被修改）。

3. **冲突可能性**
   - 不同对象可能返回相同的 `identityHashCode`（哈希碰撞），但概率较低。

4. **`null` 处理**
   - 当参数为 `null` 时，返回 `0`。

---

### 典型使用场景
1. **调试与日志**  
   追踪对象在内存中的唯一标识。
   ```java
   System.out.println("Object ID: " + System.identityHashCode(obj));
   ```

2. **验证对象唯一性**  
   结合 `==` 判断对象是否相同（比 `equals()` 更严格）。
   ```java
   boolean isSameObject = (System.identityHashCode(a) == System.identityHashCode(b));
   ```

3. **绕过重写的 `hashCode()`**  
   需要原始哈希码时（如自定义集合存储逻辑）。

---

### 代码示例
```java
public class IdentityHashCodeDemo {
    public static void main(String[] args) {
        String s1 = "Java";
        String s2 = "Java";
        String s3 = new String("Java");

        // s1 和 s2 指向常量池同一对象（identityHashCode 相同）
        System.out.println(System.identityHashCode(s1)); // 示例: 2001049719
        System.out.println(System.identityHashCode(s2)); // 同上

        // s3 是新对象（identityHashCode 不同）
        System.out.println(System.identityHashCode(s3)); // 示例: 1528902577

        // String 重写了 hashCode()（内容相同则 hashCode 相同）
        System.out.println(s1.hashCode()); // 2301506
        System.out.println(s3.hashCode()); // 2301506（与 s1 相同）
    }
}
```

---

### 注意事项
- **JVM 实现差异**：  
  原始哈希码通常基于内存地址，但 JVM 规范未强制要求（可能因 GC 移动对象变化，但实际实现会保证一致性）。
- **不可替代 `==`**：  
  哈希碰撞时，不同对象可能有相同 `identityHashCode`，判断对象相等仍需用 `==`。
- **性能**：  
  本地方法调用，效率较高。

---

### 总结
| 特性                | `System.identityHashCode()`      | 重写后的 `hashCode()`        |
|---------------------|----------------------------------|-----------------------------|
| **来源**            | JVM 内置（对象内存相关）         | 类自定义实现（基于内容）    |
| **null 处理**       | 返回 `0`                         | 抛 `NullPointerException`   |
| **对象修改影响**    | 永不改变                         | 可能改变（依赖实现）        |
| **唯一性强度**      | 较高（非绝对唯一）               | 依赖实现                    |

通过合理使用 `System.identityHashCode()`，可在需要对象“原始身份”的场景下提供关键支持，尤其适合调试、底层容器实现等需求。
